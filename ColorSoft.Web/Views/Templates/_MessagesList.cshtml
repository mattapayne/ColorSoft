<div ng-controller="MessagesCtrl">
    <div class="navbar">
        <div class="navbar-inner">
            <a href="#" class="brand">Messages</a>
            <ul class="nav nav-pills" ng-show="anySelected()">
                <li><a ng-click="showDeleteAllDialog()">Delete Selected</a></li>
            </ul>
        </div>
    </div>
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" ng-click="toggleAllSelected()" ng-checked="allSelected()" />
                </th>
                <th>
                    <a ng-click="sortValue='Email';reverseSort=!reverseSort">From</a>
                </th>
                <th>
                    <a ng-click="sortValue='Subject';reverseSort=!reverseSort">Subject</a>
                </th>
                <th>
                    <a ng-click="sortValue='Message';reverseSort=!reverseSort">Message</a>
                </th>
                <th>
                    <a ng-click="sortValue='CreatedAt';reverseSort=!reverseSort">Date</a>
                </th>
                <th>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-show="messages.length == 0">
                <td colspan="6">
                    There are currently no messages
                </td>
            </tr>
            <tr ng-repeat="message in messages | orderBy:sortValue:reverseSort">
                <td>
                    <input type="checkbox" ng-checked="message.isSelected()" ng-click="updateSelection($event, message)" />
                </td>
                <td>
                    {{ message.Email }}
                </td>
                <td>
                    {{ message.Subject }}
                </td>
                <td>
                    {{ message.Message }}
                </td>
                <td>
                    {{ message.CreatedAt }}
                </td>
                <td>
                    <a ng-click="showDeleteDialog(message)">Delete</a>
                </td>
            </tr>
        </tbody>
    </table>
    @Html.Partial(MVC.Templates.Views._DeleteMessage)
</div>
